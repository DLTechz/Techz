!function(t,e,i,s){var o=function(t){return function(){return t.search(arguments[0])}}(navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():""),n=t.browser.msie&&parseInt(t.browser.version,10)<7&&parseInt(t.browser.version,10)>4,a=!1;if(o("mobile")>-1&&(o("android")>-1||o("googletv")>-1||o("htc_flyer")>-1)&&(a=!0),o("opera")>-1&&o("mini")>-1&&o("mobi")>-1&&(a=!0),o("iphone")>-1&&(a=!0),o("windows phone os 7")>-1&&(a=!0),t.proxy===s){var h={};t.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object"],function(t,e){h["[object "+e+"]"]=e.toLowerCase()}),t.extend({proxy:function(t,e){return t?function(){return t.apply(e||this,arguments)}:void 0},type:function(t){return null===t?String(t):h[Object.prototype.toString.call(t)]||"object"},parseJSON:function(i){return"string"==typeof i&&i?(i=t.trim(i),/^[\],:{}\s]*$/.test(i.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?e.JSON&&e.JSON.parse?e.JSON.parse(i):new Function("return "+i)():void alert("Invalid JSON: "+i)):null}})}t.extend(t.fx.prototype,{update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(t.fx.step[this.prop]||t.fx.step._default)(this)}}),t.extend(t.easing,{easeOutBack:function(t,e,i,o,n,a){return a===s&&(a=1.70158),o*((e=e/n-1)*e*((a+1)*e+a)+1)+i}}),t.extend({LightBoxObject:{defaults:{name:"jquery-lightbox",style:{zIndex:99999,width:470,height:280},modal:!1,overlay:{opacity:.6},animation:{show:{duration:400,easing:"easeOutBack"},close:{duration:200,easing:"easeOutBack"},move:{duration:800,easing:"easeOutBack"},shake:{duration:100,easing:"easeOutBack",distance:10,loops:2}},flash:{width:640,height:360},iframe:{width:640,height:360},maxsize:{width:-1,height:-1},emergefrom:"top",ajax:{type:"GET",cache:!1,dataType:"html"}},options:{},animations:{},gallery:{},image:{},esqueleto:{lightbox:[],buttons:{close:[],prev:[],max:[],next:[]},background:[],image:[],title:[],html:[]},matchedlnks:[],visible:!1,maximized:!1,mode:"image",videoregs:{swf:{reg:/[^\.]\.(swf)\s*$/i},youtube:{reg:/youtube\.com\/watch/i,split:"=",index:1,iframe:1,url:"http://www.youtube.com/embed/%?autoplay=1&fs=1&rel=0&enablejsapi=1"},youtu:{reg:/youtu\.be\//i,split:"/",index:3,iframe:1,url:"http://www.youtube.com/embed/%?autoplay=1&fs=1&rel=0&enablejsapi=1"},metacafe:{reg:/metacafe\.com\/watch/i,split:"/",index:4,url:"http://www.metacafe.com/fplayer/%/.swf?playerVars=autoPlay=yes"},dailymotion:{reg:/dailymotion\.com\/video/i,split:"/",index:4,url:"http://www.dailymotion.com/swf/video/%?additionalInfos=0&autoStart=1"},google:{reg:/google\.com\/videoplay/i,split:"=",index:1,url:"http://video.google.com/googleplayer.swf?autoplay=1&hl=en&docId=%"},vimeo:{reg:/vimeo\.com/i,split:"/",index:3,iframe:1,url:"http://player.vimeo.com/video/%?hd=1&autoplay=1&show_title=1&show_byline=1&show_portrait=0&color=&fullscreen=1"},gametrailers:{reg:/gametrailers\.com/i,split:"/",index:5,url:"http://www.gametrailers.com/remote_wrap.php?mid=%"},collegehumornew:{reg:/collegehumor\.com\/video\//i,split:"video/",index:1,url:"http://www.collegehumor.com/moogaloop/moogaloop.jukebox.swf?autostart=true&fullscreen=1&use_node_id=true&clip_id=%"},collegehumor:{reg:/collegehumor\.com\/video:/i,split:"video:",index:1,url:"http://www.collegehumor.com/moogaloop/moogaloop.swf?autoplay=true&fullscreen=1&clip_id=%"},ustream:{reg:/ustream\.tv/i,split:"/",index:4,url:"http://www.ustream.tv/flash/video/%?loc=/&autoplay=true&vid=%&disabledComment=true&beginPercent=0.5331&endPercent=0.6292&locale=en_US"},twitvid:{reg:/twitvid\.com/i,split:"/",index:3,url:"http://www.twitvid.com/player/%"},wordpress:{reg:/v\.wordpress\.com/i,split:"/",index:3,url:"http://s0.videopress.com/player.swf?guid=%&v=1.01"},vzaar:{reg:/vzaar\.com\/videos/i,split:"/",index:4,url:"http://view.vzaar.com/%.flashplayer?autoplay=true&border=none"}},mapsreg:{bing:{reg:/bing\.com\/maps/i,split:"?",index:1,url:"http://www.bing.com/maps/embed/?emid=3ede2bc8-227d-8fec-d84a-00b6ff19b1cb&w=%width%&h=%height%&%"},streetview:{reg:/maps\.google\.com(.*)layer=c/i,split:"?",index:1,url:"http://maps.google.com/?output=svembed&%"},googlev2:{reg:/maps\.google\.com\/maps\/ms/i,split:"?",index:1,url:"http://maps.google.com/maps/ms?output=embed&%"},google:{reg:/maps\.google\.com/i,split:"?",index:1,url:"http://maps.google.com/maps?%&output=embed"}},imgsreg:/\.(jpg|jpeg|gif|png|bmp|tiff)(.*)?$/i,overlay:{create:function(e){return this.options=e,this.element=t('<div id="'+(new Date).getTime()+'" class="'+this.options.name+'-overlay"></div>'),this.element.css(t.extend({},{position:"fixed",top:0,left:0,opacity:0,display:"none","z-index":this.options.zIndex},this.options.style)),this.element.click(t.proxy(function(e){this.options.modal||(t.isFunction(this.options.callback)?this.options.callback():this.hide()),e.preventDefault()},this)),this.hidden=!0,this.inject(),this},inject:function(){if(this.target=t(i.body),this.target.append(this.element),n){this.element.css("position","absolute");var e=parseInt(this.element.css("zIndex"),10);if(!e){e=1;var s=this.element.css("position");"static"!==s&&s||this.element.css("position","relative"),this.element.css("zIndex",e)}e=(this.options.zIndex||0===this.options.zIndex)&&e>this.options.zIndex?this.options.zIndex:e-1,0>e&&(e=1),this.shim=t('<iframe id="IF_'+(new Date).getTime()+'" scrolling="no" frameborder=0 src=""></iframe>'),this.shim.css({zIndex:e,position:"absolute",top:0,left:0,border:"none",width:0,height:0,opacity:0}),this.shim.insertAfter(this.element),t("html, body").css({height:"100%",width:"100%","margin-left":0,"margin-right":0})}},resize:function(e,s){this.element.css({height:0,width:0}),this.shim&&this.shim.css({height:0,width:0});var o={x:t(i).width(),y:t(i).height()};return this.element.css({width:"100%",height:s||o.y}),this.shim&&(this.shim.css({height:0,width:0}),this.shim.css({position:"absolute",left:0,top:0,width:this.element.width(),height:s||o.y})),this},show:function(e){return this.hidden?(this.transition&&this.transition.stop(),this.shim&&this.shim.css("display","block"),this.element.css({display:"block",opacity:0}),this.target.bind("resize",t.proxy(this.resize,this)),this.resize(),this.hidden=!1,this.transition=this.element.fadeTo(this.options.showDuration,this.options.style.opacity,t.proxy(function(){this.options.style.opacity&&this.element.css(this.options.style),this.element.trigger("show"),t.isFunction(e)&&e()},this)),this):this},hide:function(e){return this.hidden?this:(this.transition&&this.transition.stop(),this.shim&&this.shim.css("display","none"),this.target.unbind("resize"),this.hidden=!0,this.transition=this.element.fadeTo(this.options.closeDuration,0,t.proxy(function(){this.element.trigger("hide"),t.isFunction(e)&&e(),this.element.css({height:0,width:0,display:"none"})},this)),this)}},create:function(i){this.options=t.extend(!0,this.defaults,i);var s=this.options.name,o=t('<div class="'+s+" "+s+'-mode-image"><div class="'+s+'-border-top-left"></div><div class="'+s+'-border-top-middle"></div><div class="'+s+'-border-top-right"></div><a class="'+s+'-button-close" href="#close"><span>Close</span></a><div class="'+s+'-navigator"><a class="'+s+'-button-left" href="#"><span>Previous</span></a><a class="'+s+'-button-right" href="#"><span>Next</span></a></div><div class="'+s+'-buttons"><div class="'+s+'-buttons-init"></div><a class="'+s+'-button-left" href="#"><span>Previous</span></a><a class="'+s+'-button-max" href="#"><span>Maximize</span></a><div class="'+s+'-buttons-custom"></div><a class="'+s+'-button-right" href="#"><span>Next</span></a><div class="'+s+'-buttons-end"></div></div><div class="'+s+'-background"></div><div class="'+s+'-html"></div><div class="'+s+'-border-bottom-left"></div><div class="'+s+'-border-bottom-middle"></div><div class="'+s+'-border-bottom-right"></div></div>'),n=this.esqueleto;return this.overlay.create({name:s,style:this.options.overlay,modal:this.options.modal,zIndex:this.options.style.zIndex-1,callback:this.proxy(this.close),showDuration:a?2:this.options.animation.show.duration,closeDuration:a?2:this.options.animation.close.duration}),n.lightbox=o,n.navigator=t("."+s+"-navigator",o),n.buttons.div=t("."+s+"-buttons",o),n.buttons.close=t("."+s+"-button-close",o),n.buttons.prev=t("."+s+"-button-left",o),n.buttons.max=t("."+s+"-button-max",o),n.buttons.next=t("."+s+"-button-right",o),n.buttons.custom=t("."+s+"-buttons-custom",o),n.background=t("."+s+"-background",o),n.html=t("."+s+"-html",o),n.move=t('<div class="'+s+'-move"></div>').css({position:"absolute","z-index":this.options.style.zIndex,top:-999}).append(o),t("body").append(n.move),this.win=t(e),this.addevents(),o},addevents:function(){var e=this.win;e[0].onorientationchange=function(){e.trigger("resize")},e.bind("resize",this.proxy(function(){this.visible&&(this.overlay.resize(),this.maximized||this.movebox())})),e.bind("scroll",this.proxy(function(){this.visible&&!this.maximized&&this.movebox()})),t(i).bind("keydown",this.proxy(function(t){this.visible&&(27===t.keyCode&&this.options.modal===!1&&this.close(),this.gallery.total>1&&(37===t.keyCode&&this.esqueleto.buttons.prev.triggerHandler("click",t),39===t.keyCode&&this.esqueleto.buttons.next.triggerHandler("click",t)))})),this.esqueleto.buttons.close.bind("click touchend",{fn:"close"},this.proxy(this.fn)),this.esqueleto.buttons.max.bind("click touchend",{fn:"maximinimize"},this.proxy(this.fn)),this.overlay.element.bind("show",this.proxy(function(){t(this).triggerHandler("show")})),this.overlay.element.bind("hide",this.proxy(function(){t(this).triggerHandler("close")}))},fn:function(t){this[t.data.fn].apply(this),t.preventDefault()},proxy:function(e){return t.proxy(e,this)},ex:function(e,i,s){var o={type:"",width:"",height:"",href:""};return t.each(e,this.proxy(function(e,n){return t.each(n,this.proxy(function(t,n){if("flash"==e&&i.split("?")[0].match(n.reg)||"iframe"==e&&i.match(n.reg)){if(o.href=i,n.split){var a="flash"==e?i.split(n.split)[n.index].split("?")[0].split("&")[0]:i.split(n.split)[n.index];o.href=n.url.replace("%",a).replace("%width%",s.width).replace("%height%",s.height)}return o.type=n.iframe?"iframe":e,o.width=s.width||this.options[o.type].width,o.height=s.height||this.options[o.type].height,!1}})),o.type?!1:void 0})),o},create_gallery:function(t){var e=this.esqueleto.buttons.prev,i=this.esqueleto.buttons.next;this.gallery.total=t.length,t.length>1?(e.unbind(".lightbox"),i.unbind(".lightbox"),e.bind("click.lightbox touchend.lightbox",this.proxy(function(e){e.preventDefault(),t.unshift(t.pop()),this.show(t)})),i.bind("click.lightbox touchend.lightbox",this.proxy(function(e){e.preventDefault(),t.push(t.shift()),this.show(t)})),"none"===this.esqueleto.navigator.css("display")&&this.esqueleto.buttons.div.show(),e.show(),i.show()):(e.hide(),i.hide())},custombuttons:function(e,i){var s=this.esqueleto;s.buttons.custom.empty(),t.each(e,this.proxy(function(e,o){var n=t('<a href="#" class="'+o["class"]+'">'+o.html+"</a>");n.bind("click",this.proxy(function(e){t.isFunction(o.callback)&&o.callback(this.esqueleto.image.src,this,i),e.preventDefault()})),s.buttons.custom.append(n)})),s.buttons.div.show()},show:function(e,i,s){if(this.utils.isEmpty(e))return!1;var o,n,a=e[0],h="",r=!1,l=a.href,m=this.esqueleto,p={x:this.win.width(),y:this.win.height()};1===e.length&&"element"===a.type&&(h="element"),this.loading(),r=this.visible,this.open(),r===!1&&this.movebox(),this.create_gallery(e,i),i=t.extend(!0,{width:0,height:0,modal:0,force:"",autoresize:!0,move:-1,iframe:!1,flashvars:"",cufon:!0,onOpen:function(){},onClose:function(){}},i||{},a),this.options.onOpen=i.onOpen,this.options.onClose=i.onClose,this.options.cufon=i.cufon;var u=this.unserialize(l);if(i=t.extend({},i,u),i.width&&(""+i.width).indexOf("p")>0&&(i.width=(p.x-20)*i.width.substring(0,i.width.indexOf("p"))/100),i.height&&(""+i.height).indexOf("p")>0&&(i.height=(p.y-20)*i.height.substring(0,i.height.indexOf("p"))/100),this.overlay.options.modal=i.modal,m.buttons.max.removeClass(this.options.name+"-button-min").addClass(this.options.name+"-button-max"),this.maximized=!(i.move>0||-1==i.move&&i.autoresize),t.isArray(i.buttons)&&this.custombuttons(i.buttons,a.element),this.esqueleto.buttons.custom.is(":empty")===!1&&this.esqueleto.buttons.div.show(),m.buttons.max.hide(),this.utils.isEmpty(i.force)===!1)h=i.force;else if(i.iframe)h="iframe";else if(l.match(this.imgsreg))h="image";else{var d=this.ex({flash:this.videoregs,iframe:this.mapsreg},l,i);if(!!d.type==!0&&(l=d.href,h=d.type,i.width=d.width,i.height=d.height),!!h==!1)if(l.match(/#/)){var c=l.substr(l.indexOf("#"));t(c).length>0?(h="inline",l=c):h="ajax"}else h="ajax"}if("image"===h)m.image=new Image,t(m.image).load(this.proxy(function(){var e=this.esqueleto.image;if(t(e).unbind("load"),this.visible===!1)return!1;if(i.width)o=parseInt(i.width,10),n=parseInt(i.height,10);else if(i.autoresize){var s=this.calculate(e.width,e.height);o=s.width,n=s.height,(e.width!=o||e.height!=n)&&(this.esqueleto.buttons.div.show(),this.esqueleto.buttons.max.show())}else o=e.width,n=e.height;this.esqueleto.title=this.utils.isEmpty(i.title)?!1:t('<div class="'+this.options.name+'-title"></div>').html(i.title),this.loadimage(),this.resize(o,n)})),this.esqueleto.image.onerror=this.proxy(function(){this.error("The requested image cannot be loaded. Please try again later.")}),this.esqueleto.image.src=l;else if("flash"==h||"inline"==h||"ajax"==h||"element"==h)if("inline"==h){var g=t(l),f=g.clone(!0).show();o=i.width>0?i.width:g.outerWidth(!0),n=i.height>0?i.height:g.outerHeight(!0),this.appendhtml(f,o,n)}else if("ajax"==h){if(!i.width)return this.error("You have to specify the size. Add ?lightbox[width]=600&lightbox[height]=400 at the end of the url."),!1;o=i.width,n=i.height,this.animations.ajax&&this.animations.ajax.abort(),this.animations.ajax=t.ajax(t.extend({},this.options.ajax,{url:l,error:this.proxy(function(t,e,i){this.error("AJAX Error "+t.status+" "+i)}),success:this.proxy(function(e){this.appendhtml(t(e),o,n)})}))}else if("flash"==h){var v=this.swf2html(l,i.width,i.height,i.flashvars);this.appendhtml(t(v),i.width,i.height,"flash")}else"element"===h&&(o=i.width>0?i.width:a.element.outerWidth(!0),n=i.height>0?i.height:a.element.outerHeight(!0),this.appendhtml(a.element,o,n));else if("iframe"==h){if(!i.width)return this.error("You have to specify the size. Add ?lightbox[width]=600&lightbox[height]=400&lighbox[iframe]=true at the end of the url."),!1;o=i.width,n=i.height;var b='<iframe id="IF_'+(new Date).getTime()+'" frameborder="0" src="'+l+'" style="margin:0; padding:0;"></iframe>';this.appendhtml(t(b).css({width:i.width,height:i.height}),i.width,i.height)}this.callback=t.isFunction(s)?s:function(){}},loadimage:function(){var e=this.esqueleto,i=e.background,s=this.options.name+"-loading";i.bind("complete",this.proxy(function(){return i.unbind("complete"),this.visible===!1?!1:(this.changemode("image"),i.empty(),e.html.empty(),e.title&&i.append(e.title),i.append(e.image),n||a?i.removeClass(s):(t(e.image).css("background-color","rgba(255, 255, 255, 0)"),t(e.image).stop().css("opacity",0).animate({opacity:1},400,function(){i.removeClass(s)})),void this.options.onOpen.apply(this))}))},swf2html:function(t,e,i,s){("undefined"==typeof s||""==s)&&(s="autostart=1&autoplay=1&fullscreenbutton=1");var o='<object width="'+e+'" height="'+i+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+t+'" style="margin:0; padding:0;"></param>';return o+='<param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="transparent"></param>',o+='<param name="autostart" value="true"></param><param name="autoplay" value="true"></param><param name="flashvars" value="'+s+'"></param>',o+='<param name="width" value="'+e+'"></param><param name="height" value="'+i+'"></param>',o+='<embed src="'+t+'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" autostart="true" autoplay="true" flashvars="'+s+'" wmode="transparent" width="'+e+'" height="'+i+'" style="margin:0; padding:0;"></embed></object>'},appendhtml:function(t,e,i,s){var n=this.esqueleto,a=n.background;this.changemode("html"),this.resize(e+30,i+20),a.bind("complete",this.proxy(function(){a.removeClass(this.options.name+"-loading"),n.html.append(t),"flash"==s&&o("chrome")>-1&&this.esqueleto.html.html(t),a.unbind("complete"),this.options.cufon&&"undefined"!=typeof Cufon&&Cufon.refresh(),this.options.onOpen.apply(this)}))},movebox:function(e,i){var s={x:t(this.win).width(),y:t(this.win).height()},o={x:t(this.win).scrollLeft(),y:t(this.win).scrollTop()},n=this.esqueleto,a=null!=i?i:n.lightbox.outerHeight(),h=null!=e?e:n.lightbox.outerWidth(),r=0,l=0;l=o.x+(s.x-h)/2,this.visible?r=o.y+(s.y-a)/2:"bottom"==this.options.emergefrom?r=o.y+s.y+14:"top"==this.options.emergefrom&&(r=o.y-a-14),this.visible?(this.animations.move||this.morph(n.move,{left:l},"move"),this.morph(n.move,{top:r},"move")):n.move.css({left:l,top:r})},morph:function(e,i,s,o,n){var h=t.speed({queue:n||!1,duration:a?2:this.options.animation[s].duration,easing:this.options.animation[s].easing,complete:t.isFunction(o)?this.proxy(o,this):null});return e[h.queue===!1?"each":"queue"](function(){parseFloat(t.fn.jquery)>1.5&&h.queue===!1&&t._mark(this);var e=t.extend({},h),s=this;e.curAnim=t.extend({},i),e.animatedProperties={};for(var o in i)name=o,e.animatedProperties[name]=e.specialEasing&&e.specialEasing[name]||e.easing||"swing";return t.each(i,function(i,o){var n=new t.fx(s,e,i);n.custom(n.cur(!0)||0,o,"px")}),!0})},resize:function(e,i){var s=this.esqueleto;if(this.visible){var o={x:t(this.win).width(),y:t(this.win).height()},n={x:t(this.win).scrollLeft(),y:t(this.win).scrollTop()},a=n.x+(o.x-(e+14))/2,h=n.y+(o.y-(i+14))/2;(t.browser.msie||t.browser.mozilla&&parseFloat(t.browser.version)<1.9)&&(i+=4),this.animations.move=!0,this.morph(s.move.stop(),{left:this.maximized&&0>a?0:a,top:this.maximized&&i+14>o.y?n.y:h},"move",t.proxy(function(){this.move=!1},this.animations)),this.morph(s.html,{height:i-20},"move"),this.morph(s.lightbox.stop(),{width:e+14,height:i-20},"move",{},!0),this.morph(s.navigator,{width:e},"move"),this.morph(s.navigator,{top:(i-90)/2},"move"),this.morph(s.background.stop(),{width:e,height:i},"move",function(){t(s.background).trigger("complete")})}else s.html.css({height:i-20}),s.lightbox.css({width:e+14,height:i-20}),s.background.css({width:e,height:i}),s.navigator.css({width:e,height:90})},close:function(e){var i=this.esqueleto;this.visible=!1,this.gallery={},this.options.onClose(),t.browser.msie||a?(i.background.empty(),i.html.hide().empty().show(),i.buttons.custom.empty(),i.move.css("display","none"),this.movebox()):i.move.animate({opacity:0,top:"-=40"},{queue:!1,complete:this.proxy(function(){i.background.empty(),i.html.empty(),i.buttons.custom.empty(),this.movebox(),i.move.css({display:"none",opacity:1,overflow:"visible"})})}),this.overlay.hide(this.proxy(function(){t.isFunction(this.callback)&&this.callback.apply(this,t.makeArray(e))})),i.background.stop(!0,!1).unbind("complete")},open:function(){this.visible=!0,t.browser.msie&&this.esqueleto.move.get(0).style.removeAttribute("filter"),this.esqueleto.move.stop().css({opacity:1,display:"block",overflow:"visible"}).show(),this.overlay.show()},shake:function(){for(var t=this.options.animation.shake,e=t.distance,i=t.duration,s=t.transition,o=t.loops,n=this.esqueleto.move.position().left,a=this.esqueleto.move,h=0;o>h;h++)a.animate({left:n+e},i,s),a.animate({left:n-e},i,s);a.animate({left:n+e},i,s),a.animate({left:n},i,s)},changemode:function(t){if(t!=this.mode){var e=this.options.name+"-mode-";this.esqueleto.lightbox.removeClass(e+this.mode).addClass(e+t),this.mode=t}this.esqueleto.move.css("overflow","visible")},error:function(t){alert(t),this.close()},unserialize:function(e){var i=/lightbox\[([^\]]*)?\]$/i,s={};return e.match(/#/)&&(e=e.slice(0,e.indexOf("#"))),e=e.slice(e.indexOf("?")+1).split("&"),t.each(e,function(){var t=this.split("="),e=t[0],o=t[1];e.match(i)&&(isFinite(o)?o=parseInt(o,10):"true"==o.toLowerCase()?o=!0:"false"==o.toLowerCase()&&(o=!1),s[e.match(i)[1]]=o)}),s},calculate:function(t,e){var i=this.options.maxsize.width>0?this.options.maxsize.width:this.win.width()-50,s=this.options.maxsize.height>0?this.options.maxsize.height:this.win.height()-50;return t>i?(e*=i/t,t=i,e>s&&(t*=s/e,e=s)):e>s&&(t*=s/e,e=s,t>i&&(e*=i/t,t=i)),{width:parseInt(t,10),height:parseInt(e,10)}},loading:function(){var t=this.options.style,e=this.esqueleto.background;this.changemode("image"),e.children().stop(!0),e.empty(),this.esqueleto.html.empty(),e.addClass(this.options.name+"-loading"),this.esqueleto.buttons.div.hide(),0==this.visible&&(this.movebox(t.width,t.height),this.resize(t.width,t.height))},maximinimize:function(){var t=this.esqueleto.buttons,e=this.esqueleto.image,i=this.options.name;if(this.maximized){this.maximized=!1,t.max.removeClass(i+"-button-min").addClass(i+"-button-max"),this.loading(),this.loadimage(),t.div.show();var s=this.calculate(e.width,e.height);this.resize(s.width,s.height)}else this.maximized=!0,t.max.removeClass(i+"-button-max").addClass(i+"-button-min"),this.loading(),this.loadimage(),t.div.show(),this.resize(e.width,e.height)},getOptions:function(e){var e=t(e);return t.extend({},{href:e.attr("href"),rel:t.trim(e.attr("data-rel")||e.attr("rel")),relent:e.attr("data-rel")?"data-rel":"rel",title:t.trim(e.attr("data-title")||e.attr("title")),element:e[0]},t.parseJSON(e.attr("data-options")))},link:function(e,i){var s=t(i.element),o=this.getOptions(s),n=o.rel,a=o.relent,h=i.options,r=[];if(s.blur(),i.gallery)r=i.gallery;else if(this.utils.isEmpty(n)||"nofollow"===n)r=[o];else{var l=[],m=[],p=!1;t("a["+a+"], area["+a+"]",this.ownerDocument).filter("["+a+'="'+n+'"]').each(t.proxy(function(t,e){s[0]===e?(l.unshift(this.getOptions(e)),p=!0):0==p?m.push(this.getOptions(e)):l.push(this.getOptions(e))},this)),r=l.concat(m)}return t.lightbox(r,h,i.callback,s),!1},utils:{isEmpty:function(e){return null==e?!0:"[object String]"===Object.prototype.toString.call(e)||"array"===t.type(e)?0===e.length:void 0}}},lightbox:function(e,i,s){var o=[];if(t.LightBoxObject.utils.isEmpty(e))return t.LightBoxObject;if("string"===t.type(e))o=[t.extend({},{href:e},i)];else if("array"===t.type(e)){var n=e[0];if("string"===t.type(n))for(var a=0;a<e.length;a++)o[a]=t.extend({},{href:e[a]},i);else if("object"===t.type(n))for(var a=0;a<e.length;a++)o[a]=t.extend({},i,e[a])}else"object"===t.type(e)&&e[0].nodeType&&(o=[t.extend({},{type:"element",href:"#",element:e},i)]);return t.LightBoxObject.show(o,i,s)}}),t.fn.lightbox=function(e,i){var s={selector:this.selector,options:e,callback:i};return t(this).live("click",function(e){return t.proxy(t.LightBoxObject.link,t.LightBoxObject)(e,t.extend({},s,{element:this}))})},t(function(){if(!(parseFloat(t.fn.jquery)>1.2))throw"The jQuery version that was loaded is too old. Lightbox Evolution requires jQuery 1.3+";t.LightBoxObject.create()})}(jQuery,window,document);
